"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},_PNotify=require("./PNotify.html"),_PNotify2=_interopRequireDefault(_PNotify);function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function data(){return _extends({_notice:null,_options:{}},_PNotify2.default.modules.Confirm.defaults)}var methods={initModule:function(t){this.set(t)},afterOpen:function(){this.get("prompt")&&(this.get("prompt_multi_line")?this.refs.promptMulti.focus():this.refs.promptSingle.focus())},handleClick:function(t,e){t.click&&t.click(this.get("_notice"),this.get("prompt")?this.get("prompt_value"):null,e)},handleKeyPress:function(t){if(13==t.keyCode&&!t.shiftKey){t.preventDefault();for(var e=this.get("buttons"),n=0;n<e.length;n++)e[n].promptTrigger&&e[n].click&&e[n].click(this.get("_notice"),this.get("prompt")?this.get("prompt_value"):null,t)}}};function oncreate(){this.fire("init",{module:this})}function setup(t){t.key="Confirm",t.defaults={confirm:!1,prompt:!1,prompt_class:"",prompt_value:"",prompt_multi_line:!1,align:"right",buttons:[{text:"Ok",trustText:!1,addClass:"",promptTrigger:!0,click:function(t,e){t.close(),t.fire("pnotify.confirm",{notice:t,value:e})}},{text:"Cancel",trustText:!1,addClass:"",click:function(t){t.close(),t.fire("pnotify.cancel",{notice:t})}}]},_PNotify2.default.modules.Confirm=t,_PNotify2.default.modulesAppendContainer.push(t),_extends(_PNotify2.default.styling.bootstrap3,{btn:"btn btn-default",input:"form-control"}),_extends(_PNotify2.default.styling.bootstrap4,{btn:"btn btn-secondary ml-1",input:"form-control"})}function create_main_fragment(t,e){var n,o=(t.confirm||t.prompt)&&create_if_block(t,e);return{c:function(){o&&o.c(),n=createComment()},m:function(t,e){o&&o.m(t,e),insertNode(n,t,e)},p:function(t,i){i.confirm||i.prompt?o?o.p(t,i):((o=create_if_block(i,e)).c(),o.m(n.parentNode,n)):o&&(o.u(),o.d(),o=null)},u:function(){o&&o.u(),detachNode(n)},d:function(){o&&o.d()}}}function create_if_block_2(t,e){var n,o,i=!1;function r(){i=!0,e.set({prompt_value:n.value}),i=!1}function s(t){e.handleKeyPress(t)}return{c:function(){n=createElement("textarea"),this.h()},h:function(){addListener(n,"input",r),n.rows="5",n.className=o="\n              "+(t._notice.get("_styles").input?t._notice.get("_styles").input:"")+"\n              "+t.prompt_class+"\n            ",setStyle(n,"margin-bottom","5px"),setStyle(n,"clear","both"),addListener(n,"keypress",s)},m:function(o,i){insertNode(n,o,i),e.refs.promptMulti=n,n.value=t.prompt_value},p:function(t,e){i||(n.value=e.prompt_value),(t._notice||t.prompt_class)&&o!==(o="\n              "+(e._notice.get("_styles").input?e._notice.get("_styles").input:"")+"\n              "+e.prompt_class+"\n            ")&&(n.className=o)},u:function(){detachNode(n)},d:function(){removeListener(n,"input",r),removeListener(n,"keypress",s),e.refs.promptMulti===n&&(e.refs.promptMulti=null)}}}function create_if_block_3(t,e){var n,o,i=!1;function r(){i=!0,e.set({prompt_value:n.value}),i=!1}function s(t){e.handleKeyPress(t)}return{c:function(){n=createElement("input"),this.h()},h:function(){addListener(n,"input",r),n.type="text",n.className=o="\n              "+(t._notice.get("_styles").input?t._notice.get("_styles").input:"")+"\n              "+t.prompt_class+"\n            ",setStyle(n,"margin-bottom","5px"),setStyle(n,"clear","both"),addListener(n,"keypress",s)},m:function(o,i){insertNode(n,o,i),e.refs.promptSingle=n,n.value=t.prompt_value},p:function(t,e){i||(n.value=e.prompt_value),(t._notice||t.prompt_class)&&o!==(o="\n              "+(e._notice.get("_styles").input?e._notice.get("_styles").input:"")+"\n              "+e.prompt_class+"\n            ")&&(n.className=o)},u:function(){detachNode(n)},d:function(){removeListener(n,"input",r),removeListener(n,"keypress",s),e.refs.promptSingle===n&&(e.refs.promptSingle=null)}}}function create_if_block_1(t,e){var n,o=select_block_type(t),i=o(t,e);return{c:function(){i.c(),n=createComment()},m:function(t,e){i.m(t,e),insertNode(n,t,e)},p:function(t,r){o===(o=select_block_type(r))&&i?i.p(t,r):(i.u(),i.d(),(i=o(r,e)).c(),i.m(n.parentNode,n))},u:function(){i.u(),detachNode(n)},d:function(){i.d()}}}function create_each_block(t,e,n,o,i){var r,s,c=select_block_type_1(t,e,n,o),l=c(t,e,n,o,i);return{c:function(){r=createElement("button"),l.c(),this.h()},h:function(){r.type="button",r.className=s="\n            ui-pnotify-action-button\n            "+(t._notice.get("_styles").btn?t._notice.get("_styles").btn:"")+"\n            "+(n.addClass?n.addClass:"")+"\n          ",addListener(r,"click",click_handler),r._svelte={component:i,buttons:e,button_index:o}},m:function(t,e){insertNode(r,t,e),l.m(r,null)},p:function(t,e,n,o,a){c===(c=select_block_type_1(e,n,o,a))&&l?l.p(t,e,n,o,a):(l.u(),l.d(),(l=c(e,n,o,a,i)).c(),l.m(r,null)),(t._notice||t.buttons)&&s!==(s="\n            ui-pnotify-action-button\n            "+(e._notice.get("_styles").btn?e._notice.get("_styles").btn:"")+"\n            "+(o.addClass?o.addClass:"")+"\n          ")&&(r.className=s),r._svelte.buttons=n,r._svelte.button_index=a},u:function(){detachNode(r),l.u()},d:function(){l.d(),removeListener(r,"click",click_handler)}}}function create_if_block_4(t,e,n,o,i){var r,s,c=n.text;return{c:function(){r=createElement("noscript"),s=createElement("noscript")},m:function(t,e){insertNode(r,t,e),r.insertAdjacentHTML("afterend",c),insertNode(s,t,e)},p:function(t,e,n,o,i){t.buttons&&c!==(c=o.text)&&(detachBetween(r,s),r.insertAdjacentHTML("afterend",c))},u:function(){detachBetween(r,s),detachNode(r),detachNode(s)},d:noop}}function create_if_block_5(t,e,n,o,i){var r,s=n.text;return{c:function(){r=createText(s)},m:function(t,e){insertNode(r,t,e)},p:function(t,e,n,o,i){t.buttons&&s!==(s=o.text)&&(r.data=s)},u:function(){detachNode(r)},d:noop}}function create_if_block(t,e){for(var n,o,i,r=t.prompt&&create_if_block_1(t,e),s=t.buttons,c=[],l=0;l<s.length;l+=1)c[l]=create_each_block(t,s,s[l],l,e);return{c:function(){n=createElement("div"),r&&r.c(),o=createText("\n    ");for(var t=0;t<c.length;t+=1)c[t].c();this.h()},h:function(){n.className=i="ui-pnotify-action-bar "+(t._notice.get("_styles").text?t._notice.get("_styles").text:""),setStyle(n,"margin-top","5px"),setStyle(n,"clear","both"),setStyle(n,"text-align",t.align)},m:function(t,e){insertNode(n,t,e),r&&r.m(n,null),appendNode(o,n);for(var i=0;i<c.length;i+=1)c[i].m(n,null)},p:function(t,s){s.prompt?r?r.p(t,s):((r=create_if_block_1(s,e)).c(),r.m(n,o)):r&&(r.u(),r.d(),r=null);var l=s.buttons;if(t.buttons||t._notice){for(var a=0;a<l.length;a+=1)c[a]?c[a].p(t,s,l,l[a],a):(c[a]=create_each_block(s,l,l[a],a,e),c[a].c(),c[a].m(n,null));for(;a<c.length;a+=1)c[a].u(),c[a].d();c.length=l.length}t._notice&&i!==(i="ui-pnotify-action-bar "+(s._notice.get("_styles").text?s._notice.get("_styles").text:""))&&(n.className=i),t.align&&setStyle(n,"text-align",s.align)},u:function(){detachNode(n),r&&r.u();for(var t=0;t<c.length;t+=1)c[t].u()},d:function(){r&&r.d(),destroyEach(c)}}}function select_block_type(t){return t.prompt_multi_line?create_if_block_2:create_if_block_3}function select_block_type_1(t,e,n,o){return n.trustText?create_if_block_4:create_if_block_5}function click_handler(t){var e=this._svelte.component,n=this._svelte.buttons[this._svelte.button_index];e.handleClick(n,t)}function PNotifyConfirm(t){init(this,t),this.refs={},this._state=assign(data(),t.data);var e=oncreate.bind(this);t.root?this.root._oncreate.push(e):this._oncreate=[e],this._fragment=create_main_fragment(this._state,this),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null),callAll(this._oncreate))}function createComment(){return document.createComment("")}function insertNode(t,e,n){e.insertBefore(t,n)}function detachNode(t){t.parentNode.removeChild(t)}function createElement(t){return document.createElement(t)}function addListener(t,e,n){t.addEventListener(e,n,!1)}function setStyle(t,e,n){t.style.setProperty(e,n)}function removeListener(t,e,n){t.removeEventListener(e,n,!1)}function detachBetween(t,e){for(;t.nextSibling&&t.nextSibling!==e;)t.parentNode.removeChild(t.nextSibling)}function noop(){}function createText(t){return document.createTextNode(t)}function appendNode(t,e){e.appendChild(t)}function destroyEach(t){for(var e=0;e<t.length;e+=1)t[e]&&t[e].d()}function init(t,e){t._observers={pre:blankObject(),post:blankObject()},t._handlers=blankObject(),t._bind=e._bind,t.options=e,t.root=e.root||t,t.store=t.root.store||e.store}function assign(t){for(var e,n,o=1,i=arguments.length;o<i;o++){n=arguments[o];for(e in n)t[e]=n[e]}return t}function callAll(t){for(;t&&t.length;)t.pop()()}function destroy(t){this.destroy=noop,this.fire("destroy"),this.set=this.get=noop,!1!==t&&this._fragment.u(),this._fragment.d(),this._fragment=this._state=null}function get(t){return t?this._state[t]:this._state}function fire(t,e){var n=t in this._handlers&&this._handlers[t].slice();if(n)for(var o=0;o<n.length;o+=1)n[o].call(this,e)}function observe(t,e,n){var o=n&&n.defer?this._observers.post:this._observers.pre;return(o[t]||(o[t]=[])).push(e),n&&!1===n.init||(e.__calling=!0,e.call(this,this._state[t]),e.__calling=!1),{cancel:function(){var n=o[t].indexOf(e);~n&&o[t].splice(n,1)}}}function on(t,e){if("teardown"===t)return this.on("destroy",e);var n=this._handlers[t]||(this._handlers[t]=[]);return n.push(e),{cancel:function(){var t=n.indexOf(e);~t&&n.splice(t,1)}}}function set(t){this._set(assign({},t)),this.root._lock||(this.root._lock=!0,callAll(this.root._beforecreate),callAll(this.root._oncreate),callAll(this.root._aftercreate),this.root._lock=!1)}function _set(t){var e=this._state,n={},o=!1;for(var i in t)differs(t[i],e[i])&&(n[i]=o=!0);o&&(this._state=assign({},e,t),this._recompute(n,this._state),this._bind&&this._bind(n,this._state),this._fragment&&(dispatchObservers(this,this._observers.pre,n,this._state,e),this._fragment.p(n,this._state),dispatchObservers(this,this._observers.post,n,this._state,e)))}function _mount(t,e){this._fragment.m(t,e)}function _unmount(){this._fragment&&this._fragment.u()}function blankObject(){return Object.create(null)}function differs(t,e){return t!==e||t&&"object"===(void 0===t?"undefined":_typeof(t))||"function"==typeof t}function dispatchObservers(t,e,n,o,i){for(var r in e)if(n[r]){var s=o[r],c=i[r],l=e[r];if(l)for(var a=0;a<l.length;a+=1){var u=l[a];u.__calling||(u.__calling=!0,u.call(t,s,c),u.__calling=!1)}}}assign(PNotifyConfirm.prototype,methods,{destroy:destroy,get:get,fire:fire,observe:observe,on:on,set:set,teardown:destroy,_set:_set,_mount:_mount,_unmount:_unmount}),PNotifyConfirm.prototype._recompute=noop,setup(PNotifyConfirm),exports.default=PNotifyConfirm;
//# sourceMappingURL=PNotifyConfirm.js.map